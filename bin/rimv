#!/usr/bin/env ruby
#
#  Created on 2010-5-9.
#  Copyright (c) Katsuhiko Nishimra 2009-2012.

require 'rubygems'
$:.unshift File.expand_path(File.join(File.dirname(__FILE__), *%w<.. lib>))
require 'rimv'

Signal.trap(:USR1) do
	$stderr.puts "Received SIGUSR1.", "Starting garbage collection..."
	GC.start
	$stderr.puts "done."
end

begin
	include Rimv

	require 'optparse'
	require 'rimv/cli'

	CLI.parse ARGV
	Rimv.run
rescue Interrupt
end
